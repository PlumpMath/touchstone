<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>taoensso.touchstone documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Touchstone 1.0.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="taoensso.touchstone.html"><span>taoensso.touchstone</span></a></li><li><a href="taoensso.touchstone.ring.html"><span>taoensso.touchstone.ring</span></a></li><li><a href="taoensso.touchstone.utils.html"><span>taoensso.touchstone.utils</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="taoensso.touchstone.html#var-ab-select"><span>ab-select</span></a></li><li><a href="taoensso.touchstone.html#var-config"><span>config</span></a></li><li><a href="taoensso.touchstone.html#var-mab-commit%21"><span>mab-commit!</span></a></li><li><a href="taoensso.touchstone.html#var-mab-select"><span>mab-select</span></a></li><li><a href="taoensso.touchstone.html#var-mab-select-name"><span>mab-select-name</span></a></li><li><a href="taoensso.touchstone.html#var-mab-select-ordered"><span>mab-select-ordered</span></a></li><li><a href="taoensso.touchstone.html#var-mab-select-permutations"><span>mab-select-permutations</span></a></li><li><a href="taoensso.touchstone.html#var-pr-mab-results"><span>pr-mab-results</span></a></li><li><a href="taoensso.touchstone.html#var-selected-form-name"><span>selected-form-name</span></a></li><li><a href="taoensso.touchstone.html#var-with-test-subject"><span>with-test-subject</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>taoensso.touchstone documentation</h2><pre class="doc">Simple, Carmine-backed Multi-Armed Bandit (MAB) split-testing. Both more
effective and more convenient than traditional A/B testing. Fire-and-forget!

Redis keys:
  * touchstone:&lt;test-name&gt;:nprospects -&gt; hash, {form-name count}
  * touchstone:&lt;test-name&gt;:scores     -&gt; hash, {form-name score}
  * touchstone:&lt;test-name&gt;:&lt;mab-subject-id&gt;:selection  -&gt; ttl string, form-name
  * touchstone:&lt;test-name&gt;:&lt;mab-subject-id&gt;:committed? -&gt; ttl flag

Ref. http://goo.gl/XPlP6 (UCB1 MAB algo)
     http://en.wikipedia.org/wiki/Multi-armed_bandit
     http://stevehanov.ca/blog/index.php?id=132</pre><div class="public" id="var-ab-select"><h3>ab-select</h3><h4 class="macro">macro</h4><div class="usage"><code>(ab-select test-name &amp; name-form-pairs)</code></div><pre class="doc">Like `mab-select` but uses simple, A/B-style random selection. Unless you
know all the implications, you probably want `mab-select` instead.</pre></div><div class="public" id="var-config"><h3>config</h3><div class="usage"></div><pre class="doc">This map atom controls everything about the way Touchstone operates.
See source code for details.</pre></div><div class="public" id="var-mab-commit%21"><h3>mab-commit!</h3><div class="usage"><code>(mab-commit! test-name value)</code><code>(mab-commit! test-name value &amp; name-value-pairs)</code></div><pre class="doc">Indicates the occurrence of one or more events, each of which may contribute
a specified value (-1 &lt;= value &lt;= 1) to a named MAB test score:

    ;; On sign-up button click:
    (mab-commit! :my-app.landing.buttons/sign-up 1
                 :my-app.landing/title           0.5)

    ;; On buy button click:
    (mab-commit! :my-app/sale-price (if (&gt;= order-item-qty 2) 1 0.8))

There's great flexibility in this to model all kinds of single or
multivariate test-&gt;event interactions. Any event can contribute to the
score of any test, positively or negatively, to any extent.

The statistics can get complicated so try keep things simple: resist the urge
to get fancy with the spices.</pre></div><div class="public" id="var-mab-select"><h3>mab-select</h3><h4 class="macro">macro</h4><div class="usage"><code>(mab-select test-name &amp; name-form-pairs)</code></div><pre class="doc">Defines a named MAB test that selects and evaluates one of the named testing
forms using the &quot;UCB1&quot; selection algorithm:
    (mab-select :my-test-1
                :my-form-1 &quot;String 1&quot;
                :my-form-2 (do (Thread/sleep 2000) &quot;String 2&quot;))

Dependent tests can be created through composition:
    (mab-select :my-test-1
                :my-form-1 &quot;String 1&quot;
                :my-form-2 (mab-select :my-test-1a ...))

Test forms can be freely added, reordered, or removed for an ongoing test at
any time, but avoid changing a particular form once named.</pre></div><div class="public" id="var-mab-select-name"><h3>mab-select-name</h3><h4 class="macro">macro</h4><div class="usage"><code>(mab-select-name test-name &amp; names)</code></div><pre class="doc">Like `mab-select` but takes only form names and uses each name also as its
form.</pre></div><div class="public" id="var-mab-select-ordered"><h3>mab-select-ordered</h3><h4 class="macro">macro</h4><div class="usage"><code>(mab-select-ordered test-name &amp; ordered-forms)</code></div><pre class="doc">Like `mab-select` but takes unnamed forms and automatically names them by
their order: :form-1, :form-2, ....</pre></div><div class="public" id="var-mab-select-permutations"><h3>mab-select-permutations</h3><h4 class="macro">macro</h4><div class="usage"><code>(mab-select-permutations test-name take-n &amp; ordered-forms)</code></div><pre class="doc">Advanced. Defines a positional MAB test with N!/(N-n)! testing forms. Each
testing form will be a vector permutation of the given `ordered-forms`,
automatically named for the order of its constituent forms.

Useful for testing the order of the first n forms out of N. The remaining
forms will retain their natural order.</pre></div><div class="public" id="var-pr-mab-results"><h3>pr-mab-results</h3><div class="usage"><code>(pr-mab-results test-name)</code><code>(pr-mab-results test-name &amp; more)</code></div><pre class="doc">Prints sorted MAB test results.
</pre></div><div class="public" id="var-selected-form-name"><h3>selected-form-name</h3><div class="usage"><code>(selected-form-name test-name &amp; [mab-subject-id])</code></div><pre class="doc">Returns subject's currently selected form name for test, or nil. One common
idiom is to use this for creating dependent tests:
    (case (selected-form-name :my-test-1)
      :my-form-1 (mab-select :my-test-1a ...)
      :my-form-2 (mab-select :my-test-1b ...)
      nil)</pre></div><div class="public" id="var-with-test-subject"><h3>with-test-subject</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-test-subject id &amp; body)</code></div><pre class="doc">Executes body (e.g. handling of a Ring web request) within the context of a
thread-local binding for test-subject id. When nil (default), subject will not
participate in split-testing (useful for staff/bot web requests, etc.).</pre></div></div></body></html>